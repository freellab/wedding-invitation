<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ava & Mateo — RSVP</title>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;600&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">

  <style>
    .nav {
        backdrop-filter: blur(0px);
        background-color: black;
        
    }
    .brand img {
            mix-blend-mode: screen;
        }
  </style>
</head>
<body style="background-color: white; color: black;">
  <nav class="nav">
    <div class="nav-inner">
      <div class="brand">
        <img src="https://images.squarespace-cdn.com/content/v1/685767e43d35ed5d7f92de38/a6edc558-d354-49e8-9159-75adf166c274/Bobbi+%2B+Jayden+Video+Graphics-16.png?format=1500w" alt="">
      </div>
      <div class="links">
        <a href="index.html">Home</a>
        <a href="details.html">Details</a>
        <a href="rsvp.html">RSVP</a>
      </div>
      <button class="hamb" aria-label="Open menu" aria-controls="mPanel" aria-expanded="false"><span></span></button>
    </div>
    <div id="mPanel" class="panel">
      <button class="close-btn" aria-label="Close menu" aria-controls="mPanel">&times;</button>
      <a href="index.html">Home</a>
      <a href="details.html">Details</a>
      <a href="rsvp.html">RSVP</a>
    </div>
  </nav>

  <section class="simple">
    <div class="item">
        <h1>NOW TELL US WHO’S COMING.</h1>
        <h4>RSVP BY 18 SEPTEMBER 2025<br>
            IT’S ADULTS ONLY — SO PLEASE BOOK THE BABY SITTER.</h4>

    </div>

    <form action="https://script.google.com/macros/s/AKfycbzhYDSdUpS68leHueoRKfcoeEB_L1orSkEdtQKrsSjzCjyAWdYGqty0GBKQL5YLf8E/exec" method="POST" id="rsvpForm">
        <div class="name">
            <div class="row-form">
                <label for="name">First Name</label>
                <input type="text" placeholder="" name="first" id="first" required>
            </div>
            <div class="row-form">
                <label for="name">Last Name</label>
                <input type="text" placeholder="" name="last" id="last" required>
            </div>
        </div>

        <label for="guests">NAME(S) OF Guest(s) in your Party</label>
        <input type="text" placeholder="" name="guests" id="guests" required>

        <label for="attend">SO — ARE YOU COMING?</label>
        <div class="radios" name="attend" id="attend">
            <label class="radio"><input class="radio" type="radio" name="attend" value="yes" required> Accept with pleasure</label>
            <label class="radio"><input class="radio" type="radio" name="attend" value="no" required> Decline with regret</label>
        </div>

        <br>
        <label for="dietary">DIETARY NEEDS</label>
        <textarea rows="1" name="dietary" id="dietary"></textarea>
        
        <br>
        <button type="submit">'I Do'</button>
    </form>
    <div id="successPopup" class="popup" style="display:none;
    position:fixed;inset:0;z-index:9999;justify-content:center;align-items:center;background:rgba(0,0,0,.6); margin: 0 auto;">
        <div style="background:#ffffffdc;color:#333;padding:20px 26px;max-width:320px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,.25)">
            <p style="margin:0 0 12px; font-family: 'poppins';">Thank you! Your RSVP has been recorded.</p>
            <button id="closePopupBtn" style="padding:5px 30px;border:0;background:#df1e29;color:#fff;cursor:pointer">Close</button>
        </div>
    </div>
    <script>
        // popup
        const popupEl = document.getElementById('successPopup');
        function openPopup(){ popupEl.style.display = 'flex'; }
        function closePopup(){ popupEl.style.display = 'none'; }
        document.getElementById('closePopupBtn')?.addEventListener('click', closePopup);

        // submit
        const form = document.getElementById('rsvpForm');
        const btn  = form.querySelector('button[type="submit"]');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            btn.disabled = true; btn.textContent = 'Sending...';

            try {
            // Kirim sebagai FormData + no-cors (tidak ada preflight)
            await fetch(form.action, {
                method: 'POST',
                mode: 'no-cors',
                body: new FormData(form)
            });

            // anggap sukses (karena no-cors kita tak bisa baca respons)
            form.reset();
            openPopup();
            } catch (err) {
            alert('Network error: ' + err.message);
            } finally {
            btn.disabled = false; btn.textContent = "'I Do'";
            }
        });
    </script>

    <iframe width="560" height="315" src="https://www.youtube.com/embed/3wDnIk5tuwY?si=DiGfxUGE2-Sxleod" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
  </section>

  <footer style="color: rgb(23, 23, 23);">All Right Reserved by @Freellab2025</footer>

  <script>
    ///General
    const hamb = document.querySelector('.hamb');
    const panel = document.getElementById('mPanel');
    function toggle(){
      const open = panel.classList.toggle('open');
      hamb.setAttribute('aria-expanded', open);
      document.body.style.overflow = open ? 'hidden':'';
    }
    hamb.addEventListener('click', toggle);
    panel.querySelectorAll('a').forEach(a=>a.addEventListener('click', toggle));
    window.addEventListener('keydown', e=>{ if(e.key==='Escape' && panel.classList.contains('open')) toggle(); });

    // Dapatkan tombol close
    const closeBtn2 = document.querySelector('.close-btn');
    // Close menu kalau tombol X diklik
    closeBtn2.addEventListener('click', () => {
    panel.classList.remove('open');
    });
  </script>

  <script src="nav-menu.js"></script>
</body>
</html>
